<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

body {
    font-family: 'Inter', sans-serif;
    line-height: 1.0;
    margin: 0;
    padding: 0;
    background: #fff;
    color: #000;
    width: 800px;
    height: 600px;
    overflow: hidden;
}

.weather-container {
    width: 100%;
    height: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr auto;
    gap: 2px;
    padding: 4px;
}

/* Quadrant styles */
.quadrant {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 8px;
    border: 1px solid #333;
    background: #fff;
    text-align: center;
}

/* Top Left: Feels Like Temperature */
.top-left {
    grid-column: 1;
    grid-row: 1;
}

.feels-like-temp {
    font-size: 4.5em;
    font-weight: 800;
    line-height: 0.8;
    margin-bottom: 8px;
    letter-spacing: -0.02em;
}

.feels-like-label {
    font-size: 1.2em;
    font-weight: 600;
    margin-bottom: 12px;
    color: #000;
}

.temp-range {
    display: flex;
    flex-direction: column;
    gap: 4px;
    font-size: 1.1em;
}

.temp-high {
    font-weight: 700;
    color: #000;
}

.temp-low {
    font-weight: 700;
    color: #000;
}

.range-label {
    font-size: 0.8em;
    color: #000;
    margin-bottom: 2px;
}

/* Top Right: AQI and UV */
.top-right {
    grid-column: 2;
    grid-row: 1;
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 20px;
}

.aqi-section {
    flex: 1;
    text-align: center;
    margin-right: 10px;
}

.aqi-value {
    font-size: 3.5em;
    font-weight: 800;
    line-height: 0.8;
    margin-bottom: 4px;
}

.aqi-label {
    font-size: 1.0em;
    font-weight: 600;
    margin-bottom: 4px;
}

.aqi-status {
    font-size: 0.8em;
    font-weight: 500;
}

.uv-section {
    flex: 1;
    text-align: center;
    margin-left: 10px;
}

.uv-value {
    font-size: 3.5em;
    font-weight: 800;
    line-height: 0.8;
    margin-bottom: 4px;
}

.uv-label {
    font-size: 1.0em;
    font-weight: 600;
    margin-bottom: 4px;
}

.uv-status {
    font-size: 0.8em;
    font-weight: 500;
}

/* Bottom Left: Wind Speed and Rain Chance */
.bottom-left {
    grid-column: 1;
    grid-row: 2;
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 20px;
}

.wind-section {
    flex: 1;
    text-align: center;
    margin-right: 10px;
}

.wind-speed {
    font-size: 3.5em;
    font-weight: 800;
    line-height: 0.8;
    margin-bottom: 4px;
    letter-spacing: -0.02em;
}

.wind-label {
    font-size: 1.0em;
    font-weight: 600;
    margin-bottom: 4px;
    color: #000;
}

.wind-details {
    font-size: 0.9em;
}

.wind-direction {
    font-weight: 600;
    color: #000;
}

.wind-gusts {
    font-weight: 500;
    color: #000;
}

.rain-section {
    flex: 1;
    text-align: center;
    margin-left: 10px;
}

.rain-chance {
    font-size: 3.5em;
    font-weight: 800;
    line-height: 0.8;
    margin-bottom: 4px;
}

.rain-label {
    font-size: 1.0em;
    font-weight: 600;
    margin-bottom: 4px;
    color: #000;
}

.rain-period {
    font-size: 0.8em;
    font-weight: 500;
    color: #000;
}

/* Bottom Right: Astronomical Data */
.bottom-right {
    grid-column: 2;
    grid-row: 2;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 12px;
    text-align: center;
}

.astro-section {
    margin-bottom: 20px;
}

.astro-value {
    font-size: 1.8em;
    font-weight: 800;
    line-height: 0.8;
    margin-bottom: 4px;
}

.astro-label {
    font-size: 1.0em;
    font-weight: 600;
    margin-bottom: 4px;
}

.moon-section {
    margin-top: 20px;
}

.moon-phase {
    font-size: 1.6em;
    font-weight: 800;
    line-height: 0.8;
    margin-bottom: 4px;
}

.moon-label {
    font-size: 1.0em;
    font-weight: 600;
    margin-bottom: 4px;
}

.moon-illumination {
    font-size: 0.9em;
    font-weight: 500;
    color: #000;
}

/* Status indicators - using black for e-ink visibility */
.uv-high { 
    color: #000; 
    font-weight: 800; 
}

.uv-moderate { 
    color: #000; 
    font-weight: 800; 
}

.uv-low { 
    color: #000; 
    font-weight: 800; 
}

.aqi-bad { 
    color: #000; 
    font-weight: 800; 
}

.aqi-moderate { 
    color: #000; 
    font-weight: 800; 
}

.aqi-good { 
    color: #000; 
    font-weight: 800; 
}

/* Location info overlay */
.location-overlay {
    position: absolute;
    top: 8px;
    left: 8px;
    font-size: 0.8em;
    color: #000;
    font-weight: 500;
    background: rgba(255, 255, 255, 0.9);
    padding: 2px 6px;
    border-radius: 3px;
}

.timestamp-overlay {
    position: absolute;
    top: 8px;
    right: 8px;
    font-size: 0.7em;
    color: #000;
    font-weight: 500;
    background: rgba(255, 255, 255, 0.9);
    padding: 2px 6px;
    border-radius: 3px;
}

/* Full-width quote section at bottom */
.full-width-quote {
    grid-column: 1 / -1;
    grid-row: 3;
    background: #f8f9fa;
    border: 1px solid #333;
    padding: 8px 12px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    min-height: 80px;
}

.full-quote-text {
    font-size: 1.0em;
    line-height: 1.3;
    color: #333;
    margin-bottom: 8px;
    font-style: italic;
    padding: 0 8px;
    font-weight: 500;
}

.full-quote-attribution {
    font-size: 0.8em;
    color: #000;
    font-style: normal;
}

.full-quote-author {
    font-weight: 600;
}

.full-quote-work {
    color: #000;
}

/* Responsive adjustments for exact 800x600 */
@media (max-width: 800px) and (max-height: 600px) {
    .weather-container {
        width: 100vw;
        height: 100vh;
        gap: 1px;
        padding: 2px;
        grid-template-rows: 1fr 1fr auto;
    }
    
    .quadrant {
        padding: 4px;
    }
    
    .feels-like-temp {
        font-size: 3.5em;
    }
    
    .wind-speed, .rain-chance, .aqi-value, .uv-value {
        font-size: 2.8em;
    }
    
    .astro-value {
        font-size: 1.4em;
    }
    
    .moon-phase {
        font-size: 1.2em;
    }
    
    .full-quote-text {
        font-size: 0.9em;
    }
}
</style>

<div class="layout">
    <div class="columns">
        <div class="column">
            <div class="markdown">
                <div class="weather-container">
                    <!-- Location and timestamp overlays -->
                    <div class="location-overlay">
                        {{ location_name | default: "Unknown" }}{% if location_region %}, {{ location_region }}{% endif %}
                    </div>
                    <div class="timestamp-overlay">
                        {{ formatted_time | default: "—" }}
                    </div>

                    <!-- Top Left: Feels Like Temperature -->
                    <div class="quadrant top-left">
                        <div class="feels-like-temp">{{ feels_like_c | default: "—" }}°</div>
                        <div class="feels-like-label">Feels Like</div>
                        <div class="temp-range">
                            <div class="range-label">Today</div>
                            <div class="temp-high">H: {{ tomorrow_max_c | default: "—" }}°</div>
                            <div class="temp-low">L: {{ tomorrow_min_c | default: "—" }}°</div>
                        </div>
                    </div>

                    <!-- Top Right: AQI and UV -->
                    <div class="quadrant top-right">
                        <div class="aqi-section">
                            <div class="aqi-value {% if aqi_us >= 4 %}aqi-bad{% elsif aqi_us >= 2 %}aqi-moderate{% else %}aqi-good{% endif %}">
                                {% if aqi_us and aqi_us > 0 %}{{ aqi_us }}{% else %}—{% endif %}
                            </div>
                            <div class="aqi-label">AQI</div>
                            <div class="aqi-status">
                                {% if aqi_us >= 4 %}Poor{% elsif aqi_us >= 2 %}Moderate{% else %}Good{% endif %}
                            </div>
                        </div>
                        <div class="uv-section">
                            <div class="uv-value {% if uv_index >= 8 %}uv-high{% elsif uv_index >= 5 %}uv-moderate{% else %}uv-low{% endif %}">
                                {{ uv_index | default: 0 }}
                            </div>
                            <div class="uv-label">UV Index</div>
                            <div class="uv-status">
                                {% if uv_index >= 8 %}Very High{% elsif uv_index >= 5 %}Moderate{% else %}Low{% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Left: Wind Speed and Rain Chance -->
                    <div class="quadrant bottom-left">
                        <div class="wind-section">
                            <div class="wind-speed">{{ wind_kph | default: 0 }}</div>
                            <div class="wind-label">Wind Speed</div>
                            <div class="wind-details">
                                <div class="wind-direction">{{ wind_dir | default: "—" }}</div>
                                <div class="wind-gusts">kph</div>
                            </div>
                        </div>
                        <div class="rain-section">
                            <div class="rain-chance">{{ rain_chance | default: 0 }}%</div>
                            <div class="rain-label">Rain Chance</div>
                            <div class="rain-period">Next 24h</div>
                        </div>
                    </div>

                    <!-- Bottom Right: Astronomical Data -->
                    <div class="quadrant bottom-right">
                        <div class="astro-section">
                            <div class="astro-value">{{ sunrise | default: "—" }}</div>
                            <div class="astro-label">Sunrise</div>
                        </div>
                        <div class="astro-section">
                            <div class="astro-value">{{ sunset | default: "—" }}</div>
                            <div class="astro-label">Sunset</div>
                        </div>
                        <div class="moon-section">
                            <div class="moon-phase">{{ moon_phase | default: "—" }}</div>
                            <div class="moon-label">Moon Phase</div>
                            <div class="moon-illumination">{{ moon_illumination | default: "—" }}% illuminated</div>
                        </div>
                    </div>

                    <!-- Full-width Quote Section -->
                    <div class="full-width-quote">
                        {% if weather_quote %}
                        <div class="full-quote-text">"{{ weather_quote.quote | raw }}"</div>
                        <div class="full-quote-attribution">
                            <span class="full-quote-author">{{ weather_quote.author }}</span>
                            <span class="full-quote-work">, {{ weather_quote.work }}</span>
                        </div>
                        {% else %}
                        <div class="full-quote-text">No quote available</div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
